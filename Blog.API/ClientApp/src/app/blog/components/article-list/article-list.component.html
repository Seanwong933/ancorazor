<app-header [model]="headerModel"></app-header>
<div class="container" id="articleList">
  <div class="row">
    <div class="col-lg-11 col-md-11 mx-auto list" *ngIf="data">
      <ng-container *ngFor="let item of data.list; let i = index">
        <div class="item delay-{{ i + 1 }}" [ngClass]="item.animation.class">
          <div class="post-preview {{ item.isDraft ? 'draft' : '' }}">
            <a [routerLink]="['/article', item.id]" title="{{ item.alias }}">
              <h2 class="post-title">
                {{ item.title }}
              </h2>
              <h3 class="post-subtitle">
                {{ item.digest }}
              </h3>
            </a>
            <div class="row">
              <span class="post-meta col-auto mr-auto">
                Posted on
                {{ item.createdAt | date: "yy·M·d h:mma" }}
              </span>
              <span class="operations col-auto" *ngIf="store.userIsAvailable">
                <!-- <span class="operations col-auto"> -->
                <button mat-button color="danger" (click)="delete(item, i)">
                  Delete
                </button>
                <button mat-button color="primary" (click)="edit(item)">
                  Edit
                </button>
              </span>
            </div>
          </div>
          <hr />
        </div>
      </ng-container>

      <!-- link button for SEO -->
      <div class="clearfix" *ngIf="!store.renderFromClient">
        <a
          mat-flat-button
          title="Newer posts"
          color="primary"
          class="float-left"
          [routerLink]="['/']"
          [queryParams]="{ index: data.previousPageIndex }"
          *ngIf="data.hasPrevious"
          >← Newer</a
        >
        <a
          mat-flat-button
          title="Older posts"
          color="primary"
          class="float-right"
          [routerLink]="['/']"
          [queryParams]="{ index: data.nextPageIndex }"
          *ngIf="data.hasNext"
          >Older →</a
        >
      </div>

      <!-- button route animation -->
      <div
        [ngClass]="transition.apply('fade-opposite')"
        *ngIf="store.renderFromClient"
      >
        <!-- button page turn animation -->
        <div class="clearfix" [ngClass]="transition.apply('page-turn-button')">
          <a
            mat-flat-button
            color="primary"
            class="float-left"
            (click)="preloading || previous()"
            *ngIf="data.hasPrevious"
            [attr.disabled]="preloading ? '' : null"
            >← Newer</a
          >
          <a
            mat-flat-button
            color="primary"
            class="float-right"
            (click)="preloading || next()"
            *ngIf="data.hasNext"
            [attr.disabled]="preloading ? '' : null"
            >Older →</a
          >
        </div>
      </div>
    </div>
  </div>
</div>
